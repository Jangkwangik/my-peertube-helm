nameOverride: ""
fullnameOverride: ""
replicaCount: 1

image:
  registry: "docker.io"
  repository: chocobozzz/peertube
  pullPolicy: IfNotPresent
  tag: ""

imagePullSecrets: []

containerCommand:
  - gosu
  - peertube
  - npm
  - start

extraEnv: []
envFrom: []
initcontainers: {}
podAnnotations: {}
podLabels: {}
podSecurityContext: {}
securityContext: {}
extraVolumes: []
extraVolumeMounts: []
tolerations: []
affinity: {}
nodeSelector: {}

# [1] 저장소 설정 (필수)
persistence:
  enabled: true
  accessModes:
    - ReadWriteOnce
  storageClassName: "gp2"
  storage: "10Gi"
  existingClaim: ""

resources:
  limits:
    cpu: 2000m
    memory: 2Gi
  requests:
    cpu: 500m
    memory: 1Gi

livenessProbe:
  httpGet:
    path: /
    port: peertube

readinessProbe:
  httpGet:
    path: /
    port: peertube

autoscaling:
  enabled: false

serviceAccount:
  create: true
  automount: true
  name: "peertube-sa"

# [2] 서비스 로드밸런서 설정
service:
  enabled: true
  type: LoadBalancer
  port: 80

# [3] 인그레스 끄기
ingress:
  enabled: false
  className: "nginx"
  hosts:
    - host: chart-example.local
      paths:
        - path: /
          pathType: Prefix

# [4] PeerTube 앱 설정 (비밀번호 채움)
peertube:
  log_level: info
  trust_proxy: '10.0.0.0/8'
  webserver_hostname: chart-example.local
  webserver_port: 80
  webserver_https: false
  secret: "peertube_secret_key_12345" # 값 필수
  existingSecret: ""
  existingSecretKey: "secret"

  admin:
    email: "admin@example.com"
    password: "adminpassword123!"     # 값 필수

  s3:
    enabled: false

  smtp:
    enabled: false

# [5] 외부 DB 설정 (안 써도 비밀번호는 채워야 함 - 에러 원인 추정)
externalDatabase:
  enabled: false
  hostname: "peertube-postgres-rw"
  database: "peertube"
  username: "peertube"
  password: "dummy_password_fix"      # ⭐ 여기에 값이 없어서 에러났을 확률 높음!

externalValkey:
  enabled: false
  hostname: "valkey-primary"
  password: "dummy_password_fix"

# [6] 내부 DB 설정 (값 필수)
postgresql:
  enabled: true
  auth:
    database: peertube_production
    username: peertube
    password: "dbpassword123!"         # 값 필수
    postgresPassword: "dbpassword123!" # 값 필수

# [7] 내부 캐시 설정 (값 필수)
valkey:
  enabled: true
  auth:
    password: "redispassword123!"      # 값 필수