nameOverride: ""
fullnameOverride: ""
replicaCount: 1

image:
  registry: "docker.io"
  repository: chocobozzz/peertube
  pullPolicy: IfNotPresent
  tag: "v6.3.3"

# [수정] 빈 리스트([])를 명시해서 에러 방지
imagePullSecrets: []

# [핵심 수정] 에러의 원인인 커맨드 설정을 비움 (도커 기본값 사용) ⭐
containerCommand: []

# [수정] 빈 리스트([])를 명시해서 에러 방지
extraEnv: []
envFrom: []
initcontainers: {}
podAnnotations: {}
podLabels: {}
podSecurityContext: {}
securityContext: {}
extraVolumes: []
extraVolumeMounts: []
tolerations: []
affinity: {}
nodeSelector: {}

persistence:
  enabled: true
  annotations: {}
  accessModes:
    - ReadWriteOnce
  storageClassName: "gp2"
  storage: "10Gi"
  existingClaim: ""

resources:
  limits:
    cpu: 1000m
    memory: 1Gi
  requests:
    cpu: 500m
    memory: 512Mi

livenessProbe:
  httpGet:
    path: /
    port: peertube

readinessProbe:
  httpGet:
    path: /
    port: peertube

autoscaling:
  enabled: false

serviceAccount:
  create: true
  automount: true
  annotations: {}
  name: "peertube-sa"

service:
  enabled: true
  type: LoadBalancer
  port: 80

ingress:
  enabled: false
  className: "nginx"
  annotations: {}
  hosts:
    - host: localhost
      paths:
        - path: /
          pathType: Prefix
  tls: []

peertube:
  log_level: info
  trust_proxy: '10.0.0.0/8'
  webserver_hostname: localhost
  webserver_port: 80
  webserver_https: false
  secret: "peertube-secret-random-12345"
  existingSecret: ""
  existingSecretKey: "secret"

  admin:
    email: "admin@example.com"
    # [1] 관리자 비번 (ArgoCD 주입)
    password: "" 
    existingSecret: ""
    existingSecretKeys:
      email: "-"
      password: "-"

  s3:
    enabled: true
    endpoint: "s3.amazonaws.com"
    
    # [2] 버킷 이름 직접 입력
    streaming_playlists_bucket: "peertube-video-20260110185235674800000001"
    web_videos_bucket: "peertube-video-20260110185235674800000001"
    user_exports_bucket: "peertube-video-20260110185235674800000001"
    original_video_files_bucket: "peertube-video-20260110185235674800000001"
    
    # [3] 키는 비워둠 (ArgoCD 주입)
    access_key_id: ""
    secret_access_key: ""
    
    upload_acl_public: "public-read"
    upload_acl_private: "private"
    
    existingSecret: ""
    existingSecretKeys:
      endpoint: "-"
      streaming_playlists_bucket: "-"
      web_videos_bucket: "-"
      user_exports_bucket: "-"
      original_video_files_bucket: "-"
      access_key_id: "-"
      secret_access_key: "-"

  smtp:
    host: ""
    port: 25
    user: ""
    password: ""
    tls: false
    disable_starttls: false
    from_address: ""
    existingSecret: ""
    existingSecretKeys:
      host: "-"
      port: "-"
      username: "-"
      password: "-"

externalDatabase:
  enabled: true
  # [4] DB 주소 직접 입력
  hostname: "peertube-db.c4dqgm4aut3y.us-east-1.rds.amazonaws.com"
  database: "peertube"
  username: "peertube"
  # [5] DB 비번 (ArgoCD 주입)
  password: ""
  existingSecret: ""
  existingSecretKeys:
    hostname: "-"
    database: "-"
    username: "-"
    password: "-"

externalValkey:
  enabled: false
  hostname: ""
  password: ""
  existingSecret: ""
  existingSecretKey: valkey-password

postgresql:
  enabled: false

valkey:
  enabled: true
  auth:
    password: "peertube-valkey-password"
    existingSecret: ""